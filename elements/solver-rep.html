<link rel="import" href="../bower_components/polymer/polymer.html">

<script>
  SolverRep = Polymer({
    is: 'solver-rep',
    properties: {
      redHand: Object,
      blueHand: Object,
      board: Object
    },
    factoryImpl: function(redHand,blueHand,board) {
      this.redHand = redHand;
      this.blueHand = blueHand;
      this.board = board;
    },
    objectify: function () {
      return {
        redHand: this.redHand.objectify(),
        blueHand: this.blueHand.objectify(),
        board: this.board.objectify()
      };
    },
    getCardCounts: function () {
      return [this.redHand.getCardCounts(),this.blueHand.getCardCounts(),this.board.getCardCounts()].map(function(colorCounts) {
        return Object.keys(colorCounts).map(function(color) {
          return {
            color: color,
            sum: colorCounts[color]
          };
        });
      }).reduce(function (a,b) {
        return a.concat(b);
      },[]).reduce(function (colorCounts,aColorCount) {
        colorCounts[aColorCount.color] = (colorCounts[aColorCount.color] || 0) + aColorCount.sum
        return colorCounts;
      },{});
    }
  });
</script>